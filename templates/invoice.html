<!DOCTYPE html>
<html>
<head>
    <title>Invoice #{{ invoice.invoice_number }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .no-print { display: none; }
            body { background: white; padding: 0; }
            .shadow-lg { shadow: none; }
        }
    </style>
</head>
<body class="bg-gray-100 p-10">
    <div class="max-w-3xl mx-auto bg-white p-10 shadow-lg rounded-sm border border-gray-200" id="printable">
        <div class="flex justify-between items-start mb-8">
            <div>
                <h1 class="text-4xl font-black text-blue-600 uppercase tracking-tighter">{{ workshop.name }}</h1>
                <p class="text-gray-500 whitespace-pre-line">{{ workshop.address }}</p>
                <p class="font-bold text-sm mt-2">GSTIN: {{ workshop.gst_no }}</p>
            </div>
            <div class="text-right">
                <h2 class="text-2xl font-bold text-gray-400">INVOICE</h2>
                <p class="text-gray-600">No: <span class="text-black font-semibold">{{ invoice.invoice_number }}</span></p>
                <p class="text-gray-600 text-sm">Date: {{ invoice.created_at or 'Today' }}</p>
            </div>
        </div>

        <div class="mb-8 border-b pb-4">
            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-1">Bill To</h3>
            <p class="text-lg font-bold">{{ invoice.customer_name }}</p>
            <p class="text-gray-600">{{ invoice.phone }}</p>
        </div>

        <table class="w-full text-left mb-8">
            <thead>
                <tr class="border-b-2 border-gray-800">
                    <th class="py-2 text-sm uppercase">Service</th>
                    <th class="py-2 text-sm uppercase text-right">Price</th>
                    <th class="py-2 text-sm uppercase text-right">GST %</th>
                    <th class="py-2 text-sm uppercase text-right">Total</th>
                </tr>
            </thead>
            <tbody>
                {% for s in services %}
                <tr class="border-b">
                    <td class="py-3 font-medium">{{ s.service_name }}</td>
                    <td class="py-3 text-right">₹{{ s.price }}</td>
                    <td class="py-3 text-right text-gray-500">{{ s.gst_percent }}%</td>
                    <td class="py-3 text-right font-semibold">₹{{ "%.2f"|format(s.price * (1 + s.gst_percent/100)) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="flex justify-end">
            <div class="w-64">
                <div class="flex justify-between py-1">
                    <span>Subtotal:</span>
                    <span>₹{{ invoice.subtotal }}</span>
                </div>
                <div class="flex justify-between py-1 text-gray-600">
                    <span>GST:</span>
                    <span>₹{{ invoice.gst_amount }}</span>
                </div>
                <div class="flex justify-between py-2 border-t-2 border-gray-800 mt-2 font-bold text-xl">
                    <span>Total:</span>
                    <span>₹{{ invoice.total_amount }}</span>
                </div>
            </div>
        </div>

        <div class="mt-12 bg-gray-50 p-4 rounded">
            <h4 class="text-xs font-bold uppercase text-gray-400 mb-2">Payment History</h4>
            {% for p in payments %}
            <div class="text-sm flex justify-between">
                <span>{{ p.payment_mode }} ({{ p.payment_type }})</span>
                <span class="font-bold">₹{{ p.amount }}</span>
            </div>
            {% endfor %}
        </div>

        <div class="mt-12 text-center text-gray-400 text-xs">
            Thank you for your business!
        </div>
    </div>

    <div class="max-w-3xl mx-auto mt-6 flex justify-center no-print">
        <button onclick="window.print()" class="bg-gray-800 text-white px-8 py-2 rounded shadow-md hover:bg-black">Print Invoice</button>
    </div>
</body>
</html>